jQuery(function(){ParallaxScroll.init()});var ParallaxScroll={showLogs:false,round:1000,init:function(){this._log("init");if(this._inited){this._log("Already Inited");this._inited=true;return}this._requestAnimationFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){window.setTimeout(a,1000/60)}})();this._onScroll(true)},_inited:false,_properties:["x","y","z","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","scale"],_requestAnimationFrame:null,_log:function(a){if(this.showLogs){console.log("Parallax Scroll / "+a)}},_onScroll:function(a){var b=jQuery(document).scrollTop();var c=jQuery(window).height();this._log("onScroll "+b);jQuery("[data-parallax]").each(jQuery.proxy(function(n,l){var o=jQuery(l);var r=[];var d=false;var z=o.data("style");if(z==undefined){z=o.attr("style")||"";o.data("style",z)}var h=[o.data("parallax")];var m;for(m=2;;m++){if(o.data("parallax"+m)){h.push(o.data("parallax-"+m))}else{break}}var i=h.length;for(m=0;m<i;m++){var g=h[m];var w=g["from-scroll"];if(w==undefined){w=Math.max(0,jQuery(l).offset().top-c)}w=w|0;var v=g.distance;var x=g["to-scroll"];if(v==undefined&&x==undefined){v=c}v=Math.max(v|0,1);var j=g.easing;var k=g["easing-return"];if(j==undefined||!jQuery.easing||!jQuery.easing[j]){j=null}if(k==undefined||!jQuery.easing||!jQuery.easing[k]){k=j}if(j){var A=g.duration;if(A==undefined){A=v}A=Math.max(A|0,1);var B=g["duration-return"];if(B==undefined){B=A}v=1;var f=o.data("current-time");if(f==undefined){f=0}}if(x==undefined){x=w+v}x=x|0;var y=g.smoothness;if(y==undefined){y=30}y=y|0;if(a||y==0){y=1}y=y|0;var u=b;u=Math.max(u,w);u=Math.min(u,x);if(j){if(o.data("sens")==undefined){o.data("sens","back")}if(u>w){if(o.data("sens")=="back"){f=1;o.data("sens","go")}else{f++}}if(u<x){if(o.data("sens")=="go"){f=1;o.data("sens","back")}else{f++}}if(a){f=A}o.data("current-time",f)}this._properties.map(jQuery.proxy(function(H){var D=0;var I=g[H];if(I==undefined){return}if(H=="scale"||H=="scaleX"||H=="scaleY"||H=="scaleZ"){D=1}else{I=I|0}var G=o.data("_"+H);if(G==undefined){G=D}var F=((I-D)*((u-w)/(x-w)))+D;var J=G+(F-G)/y;if(j&&f>0&&f<=A){var E=D;if(o.data("sens")=="back"){E=I;I=-I;j=k;A=B}J=jQuery.easing[j](null,f,E,I,A)}J=Math.ceil(J*this.round)/this.round;if(J==G&&F==I){J=I}if(!r[H]){r[H]=0}r[H]+=J;if(G!=r[H]){o.data("_"+H,r[H]);d=true}},this))}if(d){if(r.z!=undefined){var q=g.perspective;if(q==undefined){q=800}var p=o.parent();if(!p.data("style")){p.data("style",p.attr("style")||"")}p.attr("style","perspective:"+q+"px; -webkit-perspective:"+q+"px; "+p.data("style"))}if(r.scaleX==undefined){r.scaleX=1}if(r.scaleY==undefined){r.scaleY=1}if(r.scaleZ==undefined){r.scaleZ=1}if(r.scale!=undefined){r.scaleX*=r.scale;r.scaleY*=r.scale;r.scaleZ*=r.scale}var C="translate3d("+(r.x?r.x:0)+"px, "+(r.y?r.y:0)+"px, "+(r.z?r.z:0)+"px)";var s="rotateX("+(r.rotateX?r.rotateX:0)+"deg) rotateY("+(r.rotateY?r.rotateY:0)+"deg) rotateZ("+(r.rotateZ?r.rotateZ:0)+"deg)";var t="scaleX("+r.scaleX+") scaleY("+r.scaleY+") scaleZ("+r.scaleZ+")";var e=C+" "+s+" "+t+";";this._log(e);o.attr("style","transform:"+e+" -webkit-transform:"+e+" "+z)}},this));if(window.requestAnimationFrame){window.requestAnimationFrame(jQuery.proxy(this._onScroll,this,false))}else{this._requestAnimationFrame(jQuery.proxy(this._onScroll,this,false))}}};