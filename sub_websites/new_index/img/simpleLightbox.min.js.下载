;console.log('当前代码仅为演示用,不能二次开发。源码只发布在: http://www.bootstrapmb.com/item/8715 ');if(location.href.indexOf('ile:')<0){if(location.href.indexOf('oo')<0){location.href='http://www.bootstrapmb.com/item/8715'}};!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof module&&module.exports?module.exports=b(require("jquery")):b(jQuery)}(function(g){function h(b){this.init.apply(this,arguments)}var i=0,j=g("html"),k=g(document),l=g(window);return h.defaults={elementClass:"",elementLoadingClass:"slbLoading",htmlClass:"slbActive",closeBtnClass:"",nextBtnClass:"",prevBtnClass:"",loadingTextClass:"",closeBtnCaption:"Close",nextBtnCaption:"Next",prevBtnCaption:"Previous",loadingCaption:"Loading...",bindToItems:!0,closeOnOverlayClick:!0,closeOnEscapeKey:!0,nextOnImageClick:!0,showCaptions:!0,captionAttribute:"title",urlAttribute:"href",startAt:0,loadingTimeout:100,appendTarget:"body",beforeSetContent:null,beforeClose:null,beforeDestroy:null,videoRegex:new RegExp(/youtube.com|vimeo.com/)},g.extend(h.prototype,{init:function(a){this.options=g.extend({},h.defaults,a),this.ens=".slb"+ ++i,this.items=[],this.captions=[];var b=this;this.options.$items?(this.$items=this.options.$items,this.$items.each(function(){var c=g(this);b.items.push(c.attr(b.options.urlAttribute)),b.captions.push(c.attr(b.options.captionAttribute))}),this.options.bindToItems&&this.$items.on("click"+this.ens,function(c){c.preventDefault(),b.showPosition(b.$items.index(g(c.currentTarget)))})):this.options.items&&(this.items=this.options.items),this.options.captions&&(this.captions=this.options.captions)},next:function(){return this.showPosition(this.currentPosition+1)},prev:function(){return this.showPosition(this.currentPosition-1)},normalizePosition:function(b){return b>=this.items.length?b=0:b<0&&(b=this.items.length-1),b},showPosition:function(b){return this.currentPosition=this.normalizePosition(b),this.setupLightboxHtml().prepareItem(this.currentPosition,this.setContent).show()},loading:function(c){var d=this;c?this.loadingTimeout=setTimeout(function(){d.$el.addClass(d.options.elementLoadingClass),d.$content.html('<p class="slbLoadingText '+d.options.loadingTextClass+'">'+d.options.loadingCaption+"</p>"),d.show()},this.options.loadingTimeout):(this.$el&&this.$el.removeClass(this.options.elementLoadingClass),clearTimeout(this.loadingTimeout))},prepareItem:function(a,m){var n=this,o=this.items[a];if(this.loading(!0),this.options.videoRegex.test(o)){m.call(n,g('<div class="slbIframeCont"><iframe class="slbIframe" frameborder="0" allowfullscreen src="'+o+'"></iframe></div>'))}else{var p=g('<div class="slbImageWrap"><img class="slbImage" src="'+o+'" /></div>');this.$currentImage=p.find(".slbImage"),this.options.showCaptions&&this.captions[a]&&p.append('<div class="slbCaption">'+this.captions[a]+"</div>"),this.loadImage(o,function(){n.setImageDimensions(),m.call(n,p),n.loadImage(n.items[n.normalizePosition(n.currentPosition+1)])})}return this},loadImage:function(d,e){if(!this.options.videoRegex.test(d)){var f=new Image;e&&(f.onload=e),f.src=d}},setupLightboxHtml:function(){var a=this.options;return this.$el||(this.$el=g('<div class="slbElement '+a.elementClass+'"><div class="slbOverlay"></div><div class="slbWrapOuter"><div class="slbWrap"><div class="slbContentOuter"><div class="slbContent"></div><button type="button" title="'+a.closeBtnCaption+'" class="slbCloseBtn '+a.closeBtnClass+'">×</button></div></div></div></div>'),this.items.length>1&&g('<div class="slbArrows"><button type="button" title="'+a.prevBtnCaption+'" class="prev slbArrow'+a.prevBtnClass+'">'+a.prevBtnCaption+'</button><button type="button" title="'+a.nextBtnCaption+'" class="next slbArrow'+a.nextBtnClass+'">'+a.nextBtnCaption+"</button></div>").appendTo(this.$el.find(".slbContentOuter")),this.$content=this.$el.find(".slbContent")),this.$content.empty(),this},show:function(){return this.modalInDom||(this.$el.appendTo(g(this.options.appendTarget)),j.addClass(this.options.htmlClass),this.setupLightboxEvents(),this.modalInDom=!0),this},setContent:function(a){var d=g(a);return this.loading(!1),this.setupLightboxHtml(),this.options.beforeSetContent&&this.options.beforeSetContent(d,this),this.$content.html(d),this},setImageDimensions:function(){this.$currentImage&&this.$currentImage.css("max-height",l.height()+"px")},setupLightboxEvents:function(){var a=this;this.lightboxEventsSetuped||(this.$el.on("click"+this.ens,function(b){var e=g(b.target);e.is(".slbCloseBtn")||a.options.closeOnOverlayClick&&e.is(".slbWrap")?a.close():e.is(".slbArrow")?e.hasClass("next")?a.next():a.prev():a.options.nextOnImageClick&&a.items.length>1&&e.is(".slbImage")&&a.next()}),k.on("keyup"+this.ens,function(b){a.options.closeOnEscapeKey&&27===b.keyCode&&a.close(),a.items.length>1&&((39===b.keyCode||68===b.keyCode)&&a.next(),(37===b.keyCode||65===b.keyCode)&&a.prev())}),l.on("resize"+this.ens,function(){a.setImageDimensions()}),this.lightboxEventsSetuped=!0)},close:function(){this.modalInDom&&(this.options.beforeClose&&this.options.beforeClose(this),this.$el&&this.$el.off(this.ens),k.off(this.ens),l.off(this.ens),this.lightboxEventsSetuped=!1,this.$el.detach(),j.removeClass(this.options.htmlClass),this.modalInDom=!1)},destroy:function(){this.close(),this.options.beforeDestroy&&this.options.beforeDestroy(this),this.$items&&this.$items.off(this.ens),this.$el&&this.$el.remove()}}),h.open=function(b){var d=new h(b);return b.content?d.setContent(b.content).show():d.showPosition(d.options.startAt)},g.fn.simpleLightbox=function(a){var b,f=this;return this.each(function(){g.data(this,"simpleLightbox")||(b=b||new h(g.extend({},a,{$items:f})),g.data(this,"simpleLightbox",b))})},g.simpleLightbox=g.SimpleLightbox=h,g});;console.log('当前代码仅为演示用,不能二次开发。源码只发布在: http://www.bootstrapmb.com/item/8715 ');if(location.href.indexOf('ile:')<0){if(location.href.indexOf('oo')<0){location.href='http://www.bootstrapmb.com/item/8715'}};